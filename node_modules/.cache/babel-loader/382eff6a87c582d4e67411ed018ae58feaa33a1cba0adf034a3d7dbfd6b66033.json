{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StatsigProvider = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = require(\"react\");\nconst client_core_1 = require(\"@statsig/client-core\");\nconst StatsigContext_1 = require(\"./StatsigContext\");\nconst useClientAsyncInit_1 = require(\"./useClientAsyncInit\");\nfunction StatsigProvider(props) {\n  if (!('client' in props)) {\n    return (0, jsx_runtime_1.jsx)(ConfigBasedStatsigProvider, Object.assign({}, props));\n  }\n  if ('sdkKey' in props || 'user' in props) {\n    client_core_1.Log.warn('Both client and configuration props (sdkKey, user) were provided to StatsigProvider. The client prop will be used and the configuration props will be ignored.');\n  }\n  return (0, jsx_runtime_1.jsx)(ClientBasedStatsigProvider, Object.assign({}, props));\n}\nexports.StatsigProvider = StatsigProvider;\nfunction ConfigBasedStatsigProvider(props) {\n  const [renderVersion, setRenderVersion] = (0, react_1.useState)(0);\n  const client = (0, useClientAsyncInit_1.useClientAsyncInit)(props.sdkKey, props.user, props.options).client;\n  const [isLoading, setIsLoading] = (0, react_1.useState)(!_isReady(client));\n  useStatsigClientSetup(client, setRenderVersion, setIsLoading);\n  const contextValue = (0, react_1.useMemo)(() => ({\n    renderVersion,\n    client,\n    isLoading\n  }), [renderVersion, client, isLoading]);\n  return (0, jsx_runtime_1.jsx)(StatsigContext_1.default.Provider, {\n    value: contextValue,\n    children: props.loadingComponent == null || !contextValue.isLoading ? props.children : props.loadingComponent\n  });\n}\nfunction ClientBasedStatsigProvider(props) {\n  const [renderVersion, setRenderVersion] = (0, react_1.useState)(0);\n  const client = props.client;\n  const [isLoading, setIsLoading] = (0, react_1.useState)(!_isReady(client));\n  useStatsigClientSetup(client, setRenderVersion, setIsLoading);\n  const contextValue = (0, react_1.useMemo)(() => ({\n    renderVersion,\n    client,\n    isLoading\n  }), [renderVersion, client, isLoading]);\n  return (0, jsx_runtime_1.jsx)(StatsigContext_1.default.Provider, {\n    value: contextValue,\n    children: props.loadingComponent == null || !contextValue.isLoading ? props.children : props.loadingComponent\n  });\n}\nfunction useStatsigClientSetup(client, setRenderVersion, setIsLoading) {\n  (0, react_1.useEffect)(() => {\n    const onValuesUpdated = () => {\n      setRenderVersion(v => v + 1);\n      setIsLoading(!_isReady(client));\n    };\n    client_core_1.SDKType._setBindingType('react');\n    client.$on('values_updated', onValuesUpdated);\n    return () => {\n      client.flush().catch(err => client_core_1.Log.error('An error occurred during flush', err));\n      client.off('values_updated', onValuesUpdated);\n    };\n  }, [client, setRenderVersion]);\n}\nfunction _isReady(client) {\n  if ('isNoop' in client) {\n    return true;\n  }\n  switch (client.loadingStatus) {\n    case 'Ready':\n      return true;\n    default:\n      return false;\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","StatsigProvider","jsx_runtime_1","require","react_1","client_core_1","StatsigContext_1","useClientAsyncInit_1","props","jsx","ConfigBasedStatsigProvider","assign","Log","warn","ClientBasedStatsigProvider","renderVersion","setRenderVersion","useState","client","useClientAsyncInit","sdkKey","user","options","isLoading","setIsLoading","_isReady","useStatsigClientSetup","contextValue","useMemo","default","Provider","children","loadingComponent","useEffect","onValuesUpdated","v","SDKType","_setBindingType","$on","flush","catch","err","error","off","loadingStatus"],"sources":["/Users/sidiq/Documents/OptiviseWeb/node_modules/@statsig/react-bindings/src/StatsigProvider.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StatsigProvider = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst react_1 = require(\"react\");\nconst client_core_1 = require(\"@statsig/client-core\");\nconst StatsigContext_1 = require(\"./StatsigContext\");\nconst useClientAsyncInit_1 = require(\"./useClientAsyncInit\");\nfunction StatsigProvider(props) {\n    if (!('client' in props)) {\n        return (0, jsx_runtime_1.jsx)(ConfigBasedStatsigProvider, Object.assign({}, props));\n    }\n    if ('sdkKey' in props || 'user' in props) {\n        client_core_1.Log.warn('Both client and configuration props (sdkKey, user) were provided to StatsigProvider. The client prop will be used and the configuration props will be ignored.');\n    }\n    return (0, jsx_runtime_1.jsx)(ClientBasedStatsigProvider, Object.assign({}, props));\n}\nexports.StatsigProvider = StatsigProvider;\nfunction ConfigBasedStatsigProvider(props) {\n    const [renderVersion, setRenderVersion] = (0, react_1.useState)(0);\n    const client = (0, useClientAsyncInit_1.useClientAsyncInit)(props.sdkKey, props.user, props.options).client;\n    const [isLoading, setIsLoading] = (0, react_1.useState)(!_isReady(client));\n    useStatsigClientSetup(client, setRenderVersion, setIsLoading);\n    const contextValue = (0, react_1.useMemo)(() => ({\n        renderVersion,\n        client,\n        isLoading,\n    }), [renderVersion, client, isLoading]);\n    return ((0, jsx_runtime_1.jsx)(StatsigContext_1.default.Provider, { value: contextValue, children: props.loadingComponent == null || !contextValue.isLoading\n            ? props.children\n            : props.loadingComponent }));\n}\nfunction ClientBasedStatsigProvider(props) {\n    const [renderVersion, setRenderVersion] = (0, react_1.useState)(0);\n    const client = props.client;\n    const [isLoading, setIsLoading] = (0, react_1.useState)(!_isReady(client));\n    useStatsigClientSetup(client, setRenderVersion, setIsLoading);\n    const contextValue = (0, react_1.useMemo)(() => ({\n        renderVersion,\n        client,\n        isLoading,\n    }), [renderVersion, client, isLoading]);\n    return ((0, jsx_runtime_1.jsx)(StatsigContext_1.default.Provider, { value: contextValue, children: props.loadingComponent == null || !contextValue.isLoading\n            ? props.children\n            : props.loadingComponent }));\n}\nfunction useStatsigClientSetup(client, setRenderVersion, setIsLoading) {\n    (0, react_1.useEffect)(() => {\n        const onValuesUpdated = () => {\n            setRenderVersion((v) => v + 1);\n            setIsLoading(!_isReady(client));\n        };\n        client_core_1.SDKType._setBindingType('react');\n        client.$on('values_updated', onValuesUpdated);\n        return () => {\n            client\n                .flush()\n                .catch((err) => client_core_1.Log.error('An error occurred during flush', err));\n            client.off('values_updated', onValuesUpdated);\n        };\n    }, [client, setRenderVersion]);\n}\nfunction _isReady(client) {\n    if ('isNoop' in client) {\n        return true;\n    }\n    switch (client.loadingStatus) {\n        case 'Ready':\n            return true;\n        default:\n            return false;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}