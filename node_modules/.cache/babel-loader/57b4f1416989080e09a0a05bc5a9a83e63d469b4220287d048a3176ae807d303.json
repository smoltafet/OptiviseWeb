{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._createLayerParameterExposure = exports._createConfigExposure = exports._mapExposures = exports._createGateExposure = exports._isExposureEvent = void 0;\nconst CONFIG_EXPOSURE_NAME = 'statsig::config_exposure';\nconst GATE_EXPOSURE_NAME = 'statsig::gate_exposure';\nconst LAYER_EXPOSURE_NAME = 'statsig::layer_exposure';\nconst _createExposure = (eventName, user, details, metadata, secondaryExposures) => {\n  if (details.bootstrapMetadata) {\n    metadata['bootstrapMetadata'] = details.bootstrapMetadata;\n  }\n  return {\n    eventName,\n    user,\n    value: null,\n    metadata: _addEvaluationDetailsToMetadata(details, metadata),\n    secondaryExposures,\n    time: Date.now()\n  };\n};\nconst _isExposureEvent = ({\n  eventName\n}) => {\n  return eventName === GATE_EXPOSURE_NAME || eventName === CONFIG_EXPOSURE_NAME || eventName === LAYER_EXPOSURE_NAME;\n};\nexports._isExposureEvent = _isExposureEvent;\nconst _createGateExposure = (user, gate, exposureMapping) => {\n  var _a, _b, _c;\n  const metadata = {\n    gate: gate.name,\n    gateValue: String(gate.value),\n    ruleID: gate.ruleID\n  };\n  if (((_a = gate.__evaluation) === null || _a === void 0 ? void 0 : _a.version) != null) {\n    metadata['configVersion'] = gate.__evaluation.version;\n  }\n  return _createExposure(GATE_EXPOSURE_NAME, user, gate.details, metadata, _mapExposures((_c = (_b = gate.__evaluation) === null || _b === void 0 ? void 0 : _b.secondary_exposures) !== null && _c !== void 0 ? _c : [], exposureMapping));\n};\nexports._createGateExposure = _createGateExposure;\nfunction _mapExposures(exposures, exposureMapping) {\n  return exposures.map(exposure => {\n    if (typeof exposure === 'string') {\n      return (exposureMapping !== null && exposureMapping !== void 0 ? exposureMapping : {})[exposure];\n    }\n    return exposure;\n  }).filter(exposure => exposure != null);\n}\nexports._mapExposures = _mapExposures;\nconst _createConfigExposure = (user, config, exposureMapping) => {\n  var _a, _b, _c, _d;\n  const metadata = {\n    config: config.name,\n    ruleID: config.ruleID\n  };\n  if (((_a = config.__evaluation) === null || _a === void 0 ? void 0 : _a.version) != null) {\n    metadata['configVersion'] = config.__evaluation.version;\n  }\n  if (((_b = config.__evaluation) === null || _b === void 0 ? void 0 : _b.passed) != null) {\n    metadata['rulePassed'] = String(config.__evaluation.passed);\n  }\n  return _createExposure(CONFIG_EXPOSURE_NAME, user, config.details, metadata, _mapExposures((_d = (_c = config.__evaluation) === null || _c === void 0 ? void 0 : _c.secondary_exposures) !== null && _d !== void 0 ? _d : [], exposureMapping));\n};\nexports._createConfigExposure = _createConfigExposure;\nconst _createLayerParameterExposure = (user, layer, parameterName, exposureMapping) => {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const evaluation = layer.__evaluation;\n  const isExplicit = ((_a = evaluation === null || evaluation === void 0 ? void 0 : evaluation.explicit_parameters) === null || _a === void 0 ? void 0 : _a.includes(parameterName)) === true;\n  let allocatedExperiment = '';\n  let secondaryExposures = (_b = evaluation === null || evaluation === void 0 ? void 0 : evaluation.undelegated_secondary_exposures) !== null && _b !== void 0 ? _b : [];\n  if (isExplicit) {\n    allocatedExperiment = (_c = evaluation.allocated_experiment_name) !== null && _c !== void 0 ? _c : '';\n    secondaryExposures = (_d = evaluation.secondary_exposures) !== null && _d !== void 0 ? _d : [];\n  }\n  const parameterRuleIDs = (_e = layer.__evaluation) === null || _e === void 0 ? void 0 : _e.parameter_rule_ids;\n  const metadata = {\n    config: layer.name,\n    parameterName,\n    ruleID: (_f = parameterRuleIDs === null || parameterRuleIDs === void 0 ? void 0 : parameterRuleIDs[parameterName]) !== null && _f !== void 0 ? _f : layer.ruleID,\n    allocatedExperiment,\n    isExplicitParameter: String(isExplicit)\n  };\n  if (((_g = layer.__evaluation) === null || _g === void 0 ? void 0 : _g.version) != null) {\n    metadata['configVersion'] = layer.__evaluation.version;\n  }\n  return _createExposure(LAYER_EXPOSURE_NAME, user, layer.details, metadata, _mapExposures(secondaryExposures, exposureMapping));\n};\nexports._createLayerParameterExposure = _createLayerParameterExposure;\nconst _addEvaluationDetailsToMetadata = (details, metadata) => {\n  metadata['reason'] = details.reason;\n  if (details.lcut) {\n    metadata['lcut'] = String(details.lcut);\n  }\n  if (details.receivedAt) {\n    metadata['receivedAt'] = String(details.receivedAt);\n  }\n  return metadata;\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","_createLayerParameterExposure","_createConfigExposure","_mapExposures","_createGateExposure","_isExposureEvent","CONFIG_EXPOSURE_NAME","GATE_EXPOSURE_NAME","LAYER_EXPOSURE_NAME","_createExposure","eventName","user","details","metadata","secondaryExposures","bootstrapMetadata","_addEvaluationDetailsToMetadata","time","Date","now","gate","exposureMapping","_a","_b","_c","name","gateValue","String","ruleID","__evaluation","version","secondary_exposures","exposures","map","exposure","filter","config","_d","passed","layer","parameterName","_e","_f","_g","evaluation","isExplicit","explicit_parameters","includes","allocatedExperiment","undelegated_secondary_exposures","allocated_experiment_name","parameterRuleIDs","parameter_rule_ids","isExplicitParameter","reason","lcut","receivedAt"],"sources":["/Users/sidiq/Documents/OptiviseWeb/node_modules/@statsig/client-core/src/StatsigEvent.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._createLayerParameterExposure = exports._createConfigExposure = exports._mapExposures = exports._createGateExposure = exports._isExposureEvent = void 0;\nconst CONFIG_EXPOSURE_NAME = 'statsig::config_exposure';\nconst GATE_EXPOSURE_NAME = 'statsig::gate_exposure';\nconst LAYER_EXPOSURE_NAME = 'statsig::layer_exposure';\nconst _createExposure = (eventName, user, details, metadata, secondaryExposures) => {\n    if (details.bootstrapMetadata) {\n        metadata['bootstrapMetadata'] = details.bootstrapMetadata;\n    }\n    return {\n        eventName,\n        user,\n        value: null,\n        metadata: _addEvaluationDetailsToMetadata(details, metadata),\n        secondaryExposures,\n        time: Date.now(),\n    };\n};\nconst _isExposureEvent = ({ eventName, }) => {\n    return (eventName === GATE_EXPOSURE_NAME ||\n        eventName === CONFIG_EXPOSURE_NAME ||\n        eventName === LAYER_EXPOSURE_NAME);\n};\nexports._isExposureEvent = _isExposureEvent;\nconst _createGateExposure = (user, gate, exposureMapping) => {\n    var _a, _b, _c;\n    const metadata = {\n        gate: gate.name,\n        gateValue: String(gate.value),\n        ruleID: gate.ruleID,\n    };\n    if (((_a = gate.__evaluation) === null || _a === void 0 ? void 0 : _a.version) != null) {\n        metadata['configVersion'] = gate.__evaluation.version;\n    }\n    return _createExposure(GATE_EXPOSURE_NAME, user, gate.details, metadata, _mapExposures((_c = (_b = gate.__evaluation) === null || _b === void 0 ? void 0 : _b.secondary_exposures) !== null && _c !== void 0 ? _c : [], exposureMapping));\n};\nexports._createGateExposure = _createGateExposure;\nfunction _mapExposures(exposures, exposureMapping) {\n    return exposures\n        .map((exposure) => {\n        if (typeof exposure === 'string') {\n            return (exposureMapping !== null && exposureMapping !== void 0 ? exposureMapping : {})[exposure];\n        }\n        return exposure;\n    })\n        .filter((exposure) => exposure != null);\n}\nexports._mapExposures = _mapExposures;\nconst _createConfigExposure = (user, config, exposureMapping) => {\n    var _a, _b, _c, _d;\n    const metadata = {\n        config: config.name,\n        ruleID: config.ruleID,\n    };\n    if (((_a = config.__evaluation) === null || _a === void 0 ? void 0 : _a.version) != null) {\n        metadata['configVersion'] = config.__evaluation.version;\n    }\n    if (((_b = config.__evaluation) === null || _b === void 0 ? void 0 : _b.passed) != null) {\n        metadata['rulePassed'] = String(config.__evaluation.passed);\n    }\n    return _createExposure(CONFIG_EXPOSURE_NAME, user, config.details, metadata, _mapExposures((_d = (_c = config.__evaluation) === null || _c === void 0 ? void 0 : _c.secondary_exposures) !== null && _d !== void 0 ? _d : [], exposureMapping));\n};\nexports._createConfigExposure = _createConfigExposure;\nconst _createLayerParameterExposure = (user, layer, parameterName, exposureMapping) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const evaluation = layer.__evaluation;\n    const isExplicit = ((_a = evaluation === null || evaluation === void 0 ? void 0 : evaluation.explicit_parameters) === null || _a === void 0 ? void 0 : _a.includes(parameterName)) === true;\n    let allocatedExperiment = '';\n    let secondaryExposures = (_b = evaluation === null || evaluation === void 0 ? void 0 : evaluation.undelegated_secondary_exposures) !== null && _b !== void 0 ? _b : [];\n    if (isExplicit) {\n        allocatedExperiment = (_c = evaluation.allocated_experiment_name) !== null && _c !== void 0 ? _c : '';\n        secondaryExposures = (_d = evaluation.secondary_exposures) !== null && _d !== void 0 ? _d : [];\n    }\n    const parameterRuleIDs = (_e = layer.__evaluation) === null || _e === void 0 ? void 0 : _e.parameter_rule_ids;\n    const metadata = {\n        config: layer.name,\n        parameterName,\n        ruleID: (_f = parameterRuleIDs === null || parameterRuleIDs === void 0 ? void 0 : parameterRuleIDs[parameterName]) !== null && _f !== void 0 ? _f : layer.ruleID,\n        allocatedExperiment,\n        isExplicitParameter: String(isExplicit),\n    };\n    if (((_g = layer.__evaluation) === null || _g === void 0 ? void 0 : _g.version) != null) {\n        metadata['configVersion'] = layer.__evaluation.version;\n    }\n    return _createExposure(LAYER_EXPOSURE_NAME, user, layer.details, metadata, _mapExposures(secondaryExposures, exposureMapping));\n};\nexports._createLayerParameterExposure = _createLayerParameterExposure;\nconst _addEvaluationDetailsToMetadata = (details, metadata) => {\n    metadata['reason'] = details.reason;\n    if (details.lcut) {\n        metadata['lcut'] = String(details.lcut);\n    }\n    if (details.receivedAt) {\n        metadata['receivedAt'] = String(details.receivedAt);\n    }\n    return metadata;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}