{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._notifyVisibilityChanged = exports._subscribeToVisiblityChanged = exports._isUnloading = exports._isCurrentlyVisible = void 0;\nconst SafeJs_1 = require(\"./SafeJs\");\nconst FOREGROUND = 'foreground';\nconst BACKGROUND = 'background';\nconst LISTENERS = [];\nlet current = FOREGROUND;\nlet isUnloading = false;\nconst _isCurrentlyVisible = () => {\n  return current === FOREGROUND;\n};\nexports._isCurrentlyVisible = _isCurrentlyVisible;\nconst _isUnloading = () => isUnloading;\nexports._isUnloading = _isUnloading;\nconst _subscribeToVisiblityChanged = listener => {\n  LISTENERS.unshift(listener);\n};\nexports._subscribeToVisiblityChanged = _subscribeToVisiblityChanged;\nconst _notifyVisibilityChanged = visibility => {\n  if (visibility === current) {\n    return;\n  }\n  current = visibility;\n  LISTENERS.forEach(l => l(visibility));\n};\nexports._notifyVisibilityChanged = _notifyVisibilityChanged;\n(0, SafeJs_1._addWindowEventListenerSafe)('focus', () => {\n  isUnloading = false;\n  (0, exports._notifyVisibilityChanged)(FOREGROUND);\n});\n(0, SafeJs_1._addWindowEventListenerSafe)('blur', () => (0, exports._notifyVisibilityChanged)(BACKGROUND));\n(0, SafeJs_1._addDocumentEventListenerSafe)('visibilitychange', () => {\n  (0, exports._notifyVisibilityChanged)(document.visibilityState === 'visible' ? FOREGROUND : BACKGROUND);\n});\n(0, SafeJs_1._addWindowEventListenerSafe)((0, SafeJs_1._getUnloadEvent)(), () => {\n  isUnloading = true;\n  (0, exports._notifyVisibilityChanged)(BACKGROUND);\n});","map":{"version":3,"names":["Object","defineProperty","exports","value","_notifyVisibilityChanged","_subscribeToVisiblityChanged","_isUnloading","_isCurrentlyVisible","SafeJs_1","require","FOREGROUND","BACKGROUND","LISTENERS","current","isUnloading","listener","unshift","visibility","forEach","l","_addWindowEventListenerSafe","_addDocumentEventListenerSafe","document","visibilityState","_getUnloadEvent"],"sources":["/Users/sidiq/Documents/OptiviseWeb/node_modules/@statsig/client-core/src/VisibilityObserving.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._notifyVisibilityChanged = exports._subscribeToVisiblityChanged = exports._isUnloading = exports._isCurrentlyVisible = void 0;\nconst SafeJs_1 = require(\"./SafeJs\");\nconst FOREGROUND = 'foreground';\nconst BACKGROUND = 'background';\nconst LISTENERS = [];\nlet current = FOREGROUND;\nlet isUnloading = false;\nconst _isCurrentlyVisible = () => {\n    return current === FOREGROUND;\n};\nexports._isCurrentlyVisible = _isCurrentlyVisible;\nconst _isUnloading = () => isUnloading;\nexports._isUnloading = _isUnloading;\nconst _subscribeToVisiblityChanged = (listener) => {\n    LISTENERS.unshift(listener);\n};\nexports._subscribeToVisiblityChanged = _subscribeToVisiblityChanged;\nconst _notifyVisibilityChanged = (visibility) => {\n    if (visibility === current) {\n        return;\n    }\n    current = visibility;\n    LISTENERS.forEach((l) => l(visibility));\n};\nexports._notifyVisibilityChanged = _notifyVisibilityChanged;\n(0, SafeJs_1._addWindowEventListenerSafe)('focus', () => {\n    isUnloading = false;\n    (0, exports._notifyVisibilityChanged)(FOREGROUND);\n});\n(0, SafeJs_1._addWindowEventListenerSafe)('blur', () => (0, exports._notifyVisibilityChanged)(BACKGROUND));\n(0, SafeJs_1._addDocumentEventListenerSafe)('visibilitychange', () => {\n    (0, exports._notifyVisibilityChanged)(document.visibilityState === 'visible' ? FOREGROUND : BACKGROUND);\n});\n(0, SafeJs_1._addWindowEventListenerSafe)((0, SafeJs_1._getUnloadEvent)(), () => {\n    isUnloading = true;\n    (0, exports._notifyVisibilityChanged)(BACKGROUND);\n});\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,wBAAwB,GAAGF,OAAO,CAACG,4BAA4B,GAAGH,OAAO,CAACI,YAAY,GAAGJ,OAAO,CAACK,mBAAmB,GAAG,KAAK,CAAC;AACrI,MAAMC,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,UAAU,GAAG,YAAY;AAC/B,MAAMC,UAAU,GAAG,YAAY;AAC/B,MAAMC,SAAS,GAAG,EAAE;AACpB,IAAIC,OAAO,GAAGH,UAAU;AACxB,IAAII,WAAW,GAAG,KAAK;AACvB,MAAMP,mBAAmB,GAAGA,CAAA,KAAM;EAC9B,OAAOM,OAAO,KAAKH,UAAU;AACjC,CAAC;AACDR,OAAO,CAACK,mBAAmB,GAAGA,mBAAmB;AACjD,MAAMD,YAAY,GAAGA,CAAA,KAAMQ,WAAW;AACtCZ,OAAO,CAACI,YAAY,GAAGA,YAAY;AACnC,MAAMD,4BAA4B,GAAIU,QAAQ,IAAK;EAC/CH,SAAS,CAACI,OAAO,CAACD,QAAQ,CAAC;AAC/B,CAAC;AACDb,OAAO,CAACG,4BAA4B,GAAGA,4BAA4B;AACnE,MAAMD,wBAAwB,GAAIa,UAAU,IAAK;EAC7C,IAAIA,UAAU,KAAKJ,OAAO,EAAE;IACxB;EACJ;EACAA,OAAO,GAAGI,UAAU;EACpBL,SAAS,CAACM,OAAO,CAAEC,CAAC,IAAKA,CAAC,CAACF,UAAU,CAAC,CAAC;AAC3C,CAAC;AACDf,OAAO,CAACE,wBAAwB,GAAGA,wBAAwB;AAC3D,CAAC,CAAC,EAAEI,QAAQ,CAACY,2BAA2B,EAAE,OAAO,EAAE,MAAM;EACrDN,WAAW,GAAG,KAAK;EACnB,CAAC,CAAC,EAAEZ,OAAO,CAACE,wBAAwB,EAAEM,UAAU,CAAC;AACrD,CAAC,CAAC;AACF,CAAC,CAAC,EAAEF,QAAQ,CAACY,2BAA2B,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC,EAAElB,OAAO,CAACE,wBAAwB,EAAEO,UAAU,CAAC,CAAC;AAC1G,CAAC,CAAC,EAAEH,QAAQ,CAACa,6BAA6B,EAAE,kBAAkB,EAAE,MAAM;EAClE,CAAC,CAAC,EAAEnB,OAAO,CAACE,wBAAwB,EAAEkB,QAAQ,CAACC,eAAe,KAAK,SAAS,GAAGb,UAAU,GAAGC,UAAU,CAAC;AAC3G,CAAC,CAAC;AACF,CAAC,CAAC,EAAEH,QAAQ,CAACY,2BAA2B,EAAE,CAAC,CAAC,EAAEZ,QAAQ,CAACgB,eAAe,EAAE,CAAC,EAAE,MAAM;EAC7EV,WAAW,GAAG,IAAI;EAClB,CAAC,CAAC,EAAEZ,OAAO,CAACE,wBAAwB,EAAEO,UAAU,CAAC;AACrD,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}