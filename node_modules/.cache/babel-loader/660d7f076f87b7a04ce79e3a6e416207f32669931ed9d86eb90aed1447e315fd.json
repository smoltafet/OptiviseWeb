{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports._isDomainFailure = exports.NetworkFallbackResolver = void 0;\nconst DnsTxtQuery_1 = require(\"./DnsTxtQuery\");\nconst Hashing_1 = require(\"./Hashing\");\nconst Log_1 = require(\"./Log\");\nconst StorageProvider_1 = require(\"./StorageProvider\");\nconst DEFAULT_TTL_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\nconst COOLDOWN_TIME_MS = 4 * 60 * 60 * 1000; // 4 hours\nclass NetworkFallbackResolver {\n  constructor(options) {\n    var _a;\n    this._fallbackInfo = null;\n    this._errorBoundary = null;\n    this._dnsQueryCooldowns = {};\n    this._networkOverrideFunc = (_a = options.networkConfig) === null || _a === void 0 ? void 0 : _a.networkOverrideFunc;\n  }\n  setErrorBoundary(errorBoundary) {\n    this._errorBoundary = errorBoundary;\n  }\n  tryBumpExpiryTime(sdkKey, urlConfig) {\n    var _a;\n    const info = (_a = this._fallbackInfo) === null || _a === void 0 ? void 0 : _a[urlConfig.endpoint];\n    if (!info) {\n      return;\n    }\n    info.expiryTime = Date.now() + DEFAULT_TTL_MS;\n    _tryWriteFallbackInfoToCache(sdkKey, Object.assign(Object.assign({}, this._fallbackInfo), {\n      [urlConfig.endpoint]: info\n    }));\n  }\n  getActiveFallbackUrl(sdkKey, urlConfig) {\n    var _a, _b;\n    if (urlConfig.customUrl != null && urlConfig.fallbackUrls != null) {\n      return null;\n    }\n    let info = this._fallbackInfo;\n    if (info == null) {\n      info = (_a = _readFallbackInfoFromCache(sdkKey)) !== null && _a !== void 0 ? _a : {};\n      this._fallbackInfo = info;\n    }\n    const entry = info[urlConfig.endpoint];\n    if (!entry || Date.now() > ((_b = entry.expiryTime) !== null && _b !== void 0 ? _b : 0) || urlConfig.getChecksum() !== entry.urlConfigChecksum) {\n      delete info[urlConfig.endpoint];\n      this._fallbackInfo = info;\n      _tryWriteFallbackInfoToCache(sdkKey, this._fallbackInfo);\n      return null;\n    }\n    if (entry.url) {\n      return entry.url;\n    }\n    return null;\n  }\n  tryFetchUpdatedFallbackInfo(sdkKey, urlConfig, errorMessage, timedOut) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a, _b;\n      try {\n        if (!_isDomainFailure(errorMessage, timedOut)) {\n          return false;\n        }\n        const canUseNetworkFallbacks = urlConfig.customUrl == null && urlConfig.fallbackUrls == null;\n        const urls = canUseNetworkFallbacks ? yield this._tryFetchFallbackUrlsFromNetwork(urlConfig) : urlConfig.fallbackUrls;\n        const newUrl = this._pickNewFallbackUrl((_a = this._fallbackInfo) === null || _a === void 0 ? void 0 : _a[urlConfig.endpoint], urls);\n        if (!newUrl) {\n          return false;\n        }\n        this._updateFallbackInfoWithNewUrl(sdkKey, urlConfig, newUrl);\n        return true;\n      } catch (error) {\n        (_b = this._errorBoundary) === null || _b === void 0 ? void 0 : _b.logError('tryFetchUpdatedFallbackInfo', error);\n        return false;\n      }\n    });\n  }\n  _updateFallbackInfoWithNewUrl(sdkKey, urlConfig, newUrl) {\n    var _a, _b, _c;\n    const newFallbackInfo = {\n      urlConfigChecksum: urlConfig.getChecksum(),\n      url: newUrl,\n      expiryTime: Date.now() + DEFAULT_TTL_MS,\n      previous: []\n    };\n    const endpoint = urlConfig.endpoint;\n    const previousInfo = (_a = this._fallbackInfo) === null || _a === void 0 ? void 0 : _a[endpoint];\n    if (previousInfo) {\n      newFallbackInfo.previous.push(...previousInfo.previous);\n    }\n    if (newFallbackInfo.previous.length > 10) {\n      newFallbackInfo.previous = [];\n    }\n    const previousUrl = (_c = (_b = this._fallbackInfo) === null || _b === void 0 ? void 0 : _b[endpoint]) === null || _c === void 0 ? void 0 : _c.url;\n    if (previousUrl != null) {\n      newFallbackInfo.previous.push(previousUrl);\n    }\n    this._fallbackInfo = Object.assign(Object.assign({}, this._fallbackInfo), {\n      [endpoint]: newFallbackInfo\n    });\n    _tryWriteFallbackInfoToCache(sdkKey, this._fallbackInfo);\n  }\n  _tryFetchFallbackUrlsFromNetwork(urlConfig) {\n    return __awaiter(this, void 0, void 0, function* () {\n      var _a;\n      const cooldown = this._dnsQueryCooldowns[urlConfig.endpoint];\n      if (cooldown && Date.now() < cooldown) {\n        return null;\n      }\n      this._dnsQueryCooldowns[urlConfig.endpoint] = Date.now() + COOLDOWN_TIME_MS;\n      const result = [];\n      const records = yield (0, DnsTxtQuery_1._fetchTxtRecords)((_a = this._networkOverrideFunc) !== null && _a !== void 0 ? _a : fetch);\n      const path = _extractPathFromUrl(urlConfig.defaultUrl);\n      for (const record of records) {\n        if (!record.startsWith(urlConfig.endpointDnsKey + '=')) {\n          continue;\n        }\n        const parts = record.split('=');\n        if (parts.length > 1) {\n          let baseUrl = parts[1];\n          if (baseUrl.endsWith('/')) {\n            baseUrl = baseUrl.slice(0, -1);\n          }\n          result.push(`https://${baseUrl}${path}`);\n        }\n      }\n      return result;\n    });\n  }\n  _pickNewFallbackUrl(currentFallbackInfo, urls) {\n    var _a;\n    if (urls == null) {\n      return null;\n    }\n    const previouslyUsed = new Set((_a = currentFallbackInfo === null || currentFallbackInfo === void 0 ? void 0 : currentFallbackInfo.previous) !== null && _a !== void 0 ? _a : []);\n    const currentFallbackUrl = currentFallbackInfo === null || currentFallbackInfo === void 0 ? void 0 : currentFallbackInfo.url;\n    let found = null;\n    for (const loopUrl of urls) {\n      const url = loopUrl.endsWith('/') ? loopUrl.slice(0, -1) : loopUrl;\n      if (!previouslyUsed.has(loopUrl) && url !== currentFallbackUrl) {\n        found = url;\n        break;\n      }\n    }\n    return found;\n  }\n}\nexports.NetworkFallbackResolver = NetworkFallbackResolver;\nfunction _isDomainFailure(errorMsg, timedOut) {\n  var _a;\n  const lowerErrorMsg = (_a = errorMsg === null || errorMsg === void 0 ? void 0 : errorMsg.toLowerCase()) !== null && _a !== void 0 ? _a : '';\n  return timedOut || lowerErrorMsg.includes('uncaught exception') || lowerErrorMsg.includes('failed to fetch') || lowerErrorMsg.includes('networkerror when attempting to fetch resource');\n}\nexports._isDomainFailure = _isDomainFailure;\nfunction _getFallbackInfoStorageKey(sdkKey) {\n  return `statsig.network_fallback.${(0, Hashing_1._DJB2)(sdkKey)}`;\n}\nfunction _tryWriteFallbackInfoToCache(sdkKey, info) {\n  const hashKey = _getFallbackInfoStorageKey(sdkKey);\n  if (!info || Object.keys(info).length === 0) {\n    StorageProvider_1.Storage.removeItem(hashKey);\n    return;\n  }\n  StorageProvider_1.Storage.setItem(hashKey, JSON.stringify(info));\n}\nfunction _readFallbackInfoFromCache(sdkKey) {\n  const hashKey = _getFallbackInfoStorageKey(sdkKey);\n  const data = StorageProvider_1.Storage.getItem(hashKey);\n  if (!data) {\n    return null;\n  }\n  try {\n    return JSON.parse(data);\n  } catch (_a) {\n    Log_1.Log.error('Failed to parse FallbackInfo');\n    return null;\n  }\n}\nfunction _extractPathFromUrl(urlString) {\n  try {\n    const url = new URL(urlString);\n    return url.pathname;\n  } catch (error) {\n    return null;\n  }\n}","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","_isDomainFailure","NetworkFallbackResolver","DnsTxtQuery_1","require","Hashing_1","Log_1","StorageProvider_1","DEFAULT_TTL_MS","COOLDOWN_TIME_MS","constructor","options","_a","_fallbackInfo","_errorBoundary","_dnsQueryCooldowns","_networkOverrideFunc","networkConfig","networkOverrideFunc","setErrorBoundary","errorBoundary","tryBumpExpiryTime","sdkKey","urlConfig","info","endpoint","expiryTime","Date","now","_tryWriteFallbackInfoToCache","assign","getActiveFallbackUrl","_b","customUrl","fallbackUrls","_readFallbackInfoFromCache","entry","getChecksum","urlConfigChecksum","url","tryFetchUpdatedFallbackInfo","errorMessage","timedOut","canUseNetworkFallbacks","urls","_tryFetchFallbackUrlsFromNetwork","newUrl","_pickNewFallbackUrl","_updateFallbackInfoWithNewUrl","error","logError","_c","newFallbackInfo","previous","previousInfo","push","length","previousUrl","cooldown","records","_fetchTxtRecords","fetch","path","_extractPathFromUrl","defaultUrl","record","startsWith","endpointDnsKey","parts","split","baseUrl","endsWith","slice","currentFallbackInfo","previouslyUsed","Set","currentFallbackUrl","found","loopUrl","has","errorMsg","lowerErrorMsg","toLowerCase","includes","_getFallbackInfoStorageKey","_DJB2","hashKey","keys","Storage","removeItem","setItem","JSON","stringify","data","getItem","parse","Log","urlString","URL","pathname"],"sources":["/Users/sidiq/Documents/OptiviseWeb/node_modules/@statsig/client-core/src/NetworkFallbackResolver.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports._isDomainFailure = exports.NetworkFallbackResolver = void 0;\nconst DnsTxtQuery_1 = require(\"./DnsTxtQuery\");\nconst Hashing_1 = require(\"./Hashing\");\nconst Log_1 = require(\"./Log\");\nconst StorageProvider_1 = require(\"./StorageProvider\");\nconst DEFAULT_TTL_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\nconst COOLDOWN_TIME_MS = 4 * 60 * 60 * 1000; // 4 hours\nclass NetworkFallbackResolver {\n    constructor(options) {\n        var _a;\n        this._fallbackInfo = null;\n        this._errorBoundary = null;\n        this._dnsQueryCooldowns = {};\n        this._networkOverrideFunc = (_a = options.networkConfig) === null || _a === void 0 ? void 0 : _a.networkOverrideFunc;\n    }\n    setErrorBoundary(errorBoundary) {\n        this._errorBoundary = errorBoundary;\n    }\n    tryBumpExpiryTime(sdkKey, urlConfig) {\n        var _a;\n        const info = (_a = this._fallbackInfo) === null || _a === void 0 ? void 0 : _a[urlConfig.endpoint];\n        if (!info) {\n            return;\n        }\n        info.expiryTime = Date.now() + DEFAULT_TTL_MS;\n        _tryWriteFallbackInfoToCache(sdkKey, Object.assign(Object.assign({}, this._fallbackInfo), { [urlConfig.endpoint]: info }));\n    }\n    getActiveFallbackUrl(sdkKey, urlConfig) {\n        var _a, _b;\n        if (urlConfig.customUrl != null && urlConfig.fallbackUrls != null) {\n            return null;\n        }\n        let info = this._fallbackInfo;\n        if (info == null) {\n            info = (_a = _readFallbackInfoFromCache(sdkKey)) !== null && _a !== void 0 ? _a : {};\n            this._fallbackInfo = info;\n        }\n        const entry = info[urlConfig.endpoint];\n        if (!entry ||\n            Date.now() > ((_b = entry.expiryTime) !== null && _b !== void 0 ? _b : 0) ||\n            urlConfig.getChecksum() !== entry.urlConfigChecksum) {\n            delete info[urlConfig.endpoint];\n            this._fallbackInfo = info;\n            _tryWriteFallbackInfoToCache(sdkKey, this._fallbackInfo);\n            return null;\n        }\n        if (entry.url) {\n            return entry.url;\n        }\n        return null;\n    }\n    tryFetchUpdatedFallbackInfo(sdkKey, urlConfig, errorMessage, timedOut) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a, _b;\n            try {\n                if (!_isDomainFailure(errorMessage, timedOut)) {\n                    return false;\n                }\n                const canUseNetworkFallbacks = urlConfig.customUrl == null && urlConfig.fallbackUrls == null;\n                const urls = canUseNetworkFallbacks\n                    ? yield this._tryFetchFallbackUrlsFromNetwork(urlConfig)\n                    : urlConfig.fallbackUrls;\n                const newUrl = this._pickNewFallbackUrl((_a = this._fallbackInfo) === null || _a === void 0 ? void 0 : _a[urlConfig.endpoint], urls);\n                if (!newUrl) {\n                    return false;\n                }\n                this._updateFallbackInfoWithNewUrl(sdkKey, urlConfig, newUrl);\n                return true;\n            }\n            catch (error) {\n                (_b = this._errorBoundary) === null || _b === void 0 ? void 0 : _b.logError('tryFetchUpdatedFallbackInfo', error);\n                return false;\n            }\n        });\n    }\n    _updateFallbackInfoWithNewUrl(sdkKey, urlConfig, newUrl) {\n        var _a, _b, _c;\n        const newFallbackInfo = {\n            urlConfigChecksum: urlConfig.getChecksum(),\n            url: newUrl,\n            expiryTime: Date.now() + DEFAULT_TTL_MS,\n            previous: [],\n        };\n        const endpoint = urlConfig.endpoint;\n        const previousInfo = (_a = this._fallbackInfo) === null || _a === void 0 ? void 0 : _a[endpoint];\n        if (previousInfo) {\n            newFallbackInfo.previous.push(...previousInfo.previous);\n        }\n        if (newFallbackInfo.previous.length > 10) {\n            newFallbackInfo.previous = [];\n        }\n        const previousUrl = (_c = (_b = this._fallbackInfo) === null || _b === void 0 ? void 0 : _b[endpoint]) === null || _c === void 0 ? void 0 : _c.url;\n        if (previousUrl != null) {\n            newFallbackInfo.previous.push(previousUrl);\n        }\n        this._fallbackInfo = Object.assign(Object.assign({}, this._fallbackInfo), { [endpoint]: newFallbackInfo });\n        _tryWriteFallbackInfoToCache(sdkKey, this._fallbackInfo);\n    }\n    _tryFetchFallbackUrlsFromNetwork(urlConfig) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const cooldown = this._dnsQueryCooldowns[urlConfig.endpoint];\n            if (cooldown && Date.now() < cooldown) {\n                return null;\n            }\n            this._dnsQueryCooldowns[urlConfig.endpoint] = Date.now() + COOLDOWN_TIME_MS;\n            const result = [];\n            const records = yield (0, DnsTxtQuery_1._fetchTxtRecords)((_a = this._networkOverrideFunc) !== null && _a !== void 0 ? _a : fetch);\n            const path = _extractPathFromUrl(urlConfig.defaultUrl);\n            for (const record of records) {\n                if (!record.startsWith(urlConfig.endpointDnsKey + '=')) {\n                    continue;\n                }\n                const parts = record.split('=');\n                if (parts.length > 1) {\n                    let baseUrl = parts[1];\n                    if (baseUrl.endsWith('/')) {\n                        baseUrl = baseUrl.slice(0, -1);\n                    }\n                    result.push(`https://${baseUrl}${path}`);\n                }\n            }\n            return result;\n        });\n    }\n    _pickNewFallbackUrl(currentFallbackInfo, urls) {\n        var _a;\n        if (urls == null) {\n            return null;\n        }\n        const previouslyUsed = new Set((_a = currentFallbackInfo === null || currentFallbackInfo === void 0 ? void 0 : currentFallbackInfo.previous) !== null && _a !== void 0 ? _a : []);\n        const currentFallbackUrl = currentFallbackInfo === null || currentFallbackInfo === void 0 ? void 0 : currentFallbackInfo.url;\n        let found = null;\n        for (const loopUrl of urls) {\n            const url = loopUrl.endsWith('/') ? loopUrl.slice(0, -1) : loopUrl;\n            if (!previouslyUsed.has(loopUrl) && url !== currentFallbackUrl) {\n                found = url;\n                break;\n            }\n        }\n        return found;\n    }\n}\nexports.NetworkFallbackResolver = NetworkFallbackResolver;\nfunction _isDomainFailure(errorMsg, timedOut) {\n    var _a;\n    const lowerErrorMsg = (_a = errorMsg === null || errorMsg === void 0 ? void 0 : errorMsg.toLowerCase()) !== null && _a !== void 0 ? _a : '';\n    return (timedOut ||\n        lowerErrorMsg.includes('uncaught exception') ||\n        lowerErrorMsg.includes('failed to fetch') ||\n        lowerErrorMsg.includes('networkerror when attempting to fetch resource'));\n}\nexports._isDomainFailure = _isDomainFailure;\nfunction _getFallbackInfoStorageKey(sdkKey) {\n    return `statsig.network_fallback.${(0, Hashing_1._DJB2)(sdkKey)}`;\n}\nfunction _tryWriteFallbackInfoToCache(sdkKey, info) {\n    const hashKey = _getFallbackInfoStorageKey(sdkKey);\n    if (!info || Object.keys(info).length === 0) {\n        StorageProvider_1.Storage.removeItem(hashKey);\n        return;\n    }\n    StorageProvider_1.Storage.setItem(hashKey, JSON.stringify(info));\n}\nfunction _readFallbackInfoFromCache(sdkKey) {\n    const hashKey = _getFallbackInfoStorageKey(sdkKey);\n    const data = StorageProvider_1.Storage.getItem(hashKey);\n    if (!data) {\n        return null;\n    }\n    try {\n        return JSON.parse(data);\n    }\n    catch (_a) {\n        Log_1.Log.error('Failed to parse FallbackInfo');\n        return null;\n    }\n}\nfunction _extractPathFromUrl(urlString) {\n    try {\n        const url = new URL(urlString);\n        return url.pathname;\n    }\n    catch (error) {\n        return null;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}